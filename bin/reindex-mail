#!/usr/bin/env ruby
#
# Re-index all mail and send notifications for new messages.

require 'terminal-notifier'

# Run `notmuch` for search reindexing.
system 'notmuch new'

# Send a desktop notification when new mail comes in.
num = `ls -l ~/.mail/tubbo-psychedeli.ca/INBOX/new | wc -l`
TerminalNotifier.notify "You have #{num} new messages.", title: 'Mail' if num.to_i > 0
