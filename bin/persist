#!/usr/bin/env ruby
#
# Persists dot files in .dots/config

require 'fileutils'
include FileUtils

ARGV.each do |dot_file|
  dot_file_without_dot = dot_file.gsub(/\./, '')
  home = `echo $HOME`
  home.gsub!(/\n/, '')

  if mv "#{home}/#{dot_file}", "#{home}/.dots/config/#{dot_file_without_dot}"
    if `ln -s ~/.dots/config/#{dot_file_without_dot} ~/#{dot_file}`
      puts "#{dot_file} saved to DOTS!"
      exit 0
    else
      puts "Error: #{dot_file} could not be symlinked."
      exit 1
    end
  else
    puts "Error: #{dot_file} could not be moved."
    exit 1
  end
end
