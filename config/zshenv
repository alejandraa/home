# Master configuration for all shells.
#
# Environment variable definitions go here, but that's about it. All
# other definitions go into zshrc or lib/plugins.

# Set the path to our shell configuration.
ZSH=$HOME/.dots
DOTS=$ZSH

# Change package-installed Ruby on demand
source /usr/local/opt/chruby/share/chruby/chruby.sh
RUBIES=(
  $HOME/.rubies/*
)

# Enable auto-switching of Ruby on `cd`.
source /usr/local/opt/chruby/share/chruby/auto.sh

# Documentation PATHs
MANPATH=/usr/local/opt/coreutils/libexec/gnuman:$MANPATH

export PYTHONPATH=$HOME/.python/lib/python2.7/site-packages/
export GEMPATH=$HOME/.gem/ruby/2.0.0/bin/
export JSPATH=$HOME/node_modules/.bin/
export GEMPATHS=$PWD/bin:$PWD/vendor/gems/bin
export PATH=$PYTHONPATH:$GEMPATH:$JSPATH:$GEMPATHS:$PATH

# Cache the path laid out in this file and `reset_path` if the shell
# gets confused.
export DEFAULT_PATH=$PATH
alias reset_path='export PATH=$DEFAULT_PATH'

# Force 256 color terminals
TERM=screen-256color

# Text editing and paging
EDITOR='vim'
PAGER='less -R'

# Email reading
MAIL=/var/mail/$USER

# A more basic version of my promptstring for non-interactive shells.
PROMPT="â™¬  "

# PostgreSQL config
ARCHFLAGS='-arch x86_64'
PGDATA=/usr/local/var/postgres

# Configure the MySQL prompt to show more information.
MYSQL_PS1="\R:\m:\s \h> "

# Disable weekly automatic update.
DISABLE_AUTO_UPDATE="true"

# Don't set iTerm/Terminal's title automatically.
DISABLE_AUTO_TITLE="true"

# Display red dots when ZSH is hanging.
COMPLETION_WAITING_DOTS="true"

# Make Ruby even faster
RUBY_HEAP_MIN_SLOTS=1000000
RUBY_HEAP_SLOTS_INCREMENT=1000000
RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
RUBY_GC_MALLOC_LIMIT=1000000000
RUBY_HEAP_FREE_MIN=500000

# Always use Bundler with RVM.
USE_BUNDLER=force

# Set this to a different Git remote to pull updates from there.
# NOTE: You will have to manage updating from upstream yourself.
DOTS_REMOTE='origin'

# Colorize Grep
export GREP_OPTIONS='--color=auto'
export GREP_COLOR='1;32'

# Use the Turn testing engine on eLocal
export USE_TURN=true

# Load Java on OS X
export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home/

# Load the framework.
source $ZSH/lib/dots.sh

# Load Boxen
[ -f /opt/boxen/env.sh ] && source /opt/boxen/env.sh

# Override git log
alias gl='nocorrect git blog'

# Hack to get around PostgreSQL not always being socket-connectable
export PGHOST='localhost'

# Use vagrant-digitalocean
export SSL_CERT_FILE=/usr/local/opt/curl-ca-bundle/share/ca-bundle.crt

# Execute autoenv
source ~/.antigen/repos/https-COLON--SLASH--SLASH-github.com-SLASH-kennethreitz-SLASH-autoenv.git/activate.sh

# Execute Boxen
[ -f /opt/boxen/env.sh ] && source /opt/boxen/env.sh

# So we can actually compile Ruby 1.8
export CPPFLAGS=-I/opt/X11/include

# Fix ssh-agent in Tmux
source $HOME/.dots/vendor/ssh-find-agent/ssh-find-agent.zsh

# Use online help
unalias run-help
autoload run-help
HELPDIR=/usr/local/share/zsh/helpfiles
